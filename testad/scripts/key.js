function GetCookie(e){var n=document.cookie.indexOf(e+"="),t=n+e.length+1,a=document.cookie.indexOf(";",t);return n||e===document.cookie.substring(0,e.length)?-1===n?null:(-1===a&&(a=document.cookie.length),decodeURIComponent(document.cookie.substring(t,a))):null}function SetCookie(e,n,t,a,o){var i=SetCookie.arguments,r=SetCookie.arguments.length,d=new Date,c=r>5?i[5]:!1;a=r>3?i[3]:null,o=r>4?i[4]:null,t=null===t||""===t?5184e7:1e3*t,d.setTime(d.getTime()+t),document.cookie=e+"="+escape(n)+(null===d?"":"; expires="+d.toGMTString())+(null===a?"/":"; path="+a)+(null===o?"":"; domain="+o)+(c===!0?"; secure":"")}function DeleteCookie(e){var n=new Date,t=GetCookie(e);n.setTime(n.getTime()-1),document.cookie=e+"="+t+"; expires="+n.toGMTString()}function addstoryfav(e){if(""===username||null===username)return void alert("您必须登录后能才能收藏文章!");document.getElementById("addfavlink").innerHTML="保存...";var n=new XMLHttpRequest;n.open("POST","/users/addfavstory/"+e),n.setRequestHeader("Content-Type","application/text"),n.onload=function(){if(200===n.status){var e=n.responseText;"ok"===e&&(document.getElementById("addfavlink").innerHTML="已收藏")}else 200!==n.status},n.send(JSON.stringify({storyid:e}))}function showOverlay(e){document.getElementById(e).className="overlay-container on"}function closeOverlay(e){document.getElementById(e).className="overlay-container"}function adReachability(){var e,n={dcR:"_dc",mmR:"_mm",szR:"_sz",amR:"_am"},t="";for(var a in n)n.hasOwnProperty(a)&&(e=GetCookie(a),"reachable"===e?t+="&"+n[a]+"=1":null===e&&(t+="&"+n[a]+"=2"));return t}function trackAd(e,n,t){var a,o;if("function"==typeof window.ga){a=(new Date).getTime(),o=a-window.adStartTime,ga("send","event","Third Party Ad",e+" - all",n,{nonInteraction:1}),ga("send","timing","Third Party Ad",e,o,n),void 0!==t&&""!==t&&ga("send","event","Third Party Ad",e+" - "+t,n,{nonInteraction:1}),"number"==typeof window.startTime&&(a=(new Date).getTime(),o=a-window.startTime,ga("send","timing","Third Party Ad",e+" VS Page Start",o,n));try{console.log(e+" - "+t+" "+n+": "+o)}catch(i){}}}function checkAd(e,n){var t,a,o,i=!1,r=0,d=0,c=0,s=0,m="",l=n.getElementsByTagName("div")[0],u="",g="",h=1800;e.checking===!0&&(m=e.adClient+" "+e.adWidth+"x"+e.adHeight+" "+e.adNote,void 0!==e.thirdPartyVendor?u=e.thirdPartyVendor:/doubleclick|adsafeprotected\.com\/.*\/dc\//i.test(e.fallBackImg)&&(u="dcR"),0===e.checkingTime?(""!==u&&(g=GetCookie(u)||"unknown",e.reachabilityStatus=g),trackAd("Impression Track Start",m,g)):(void 0!==e.reachabilityStatus&&(g=e.reachabilityStatus),void 0!==e.thirdPartyVendor&&(u=e.thirdPartyVendor)),null===n?i=!1:e.checkDom===!0?(r=n.getElementsByTagName("img").length,d=n.getElementsByTagName("object").length,c=n.getElementsByTagName("iframe").length,s=n.getElementsByTagName("video").length,i=r>0||c>0||d>0||s>0?!0:!1):i=!0,i===!0?(e.checking=!1,trackAd("Impression Track Success",m,g),SetCookie(u,"reachable",h,"/")):e.checkingTime<e.checkingTimeMax?(e.checkingTime+=1,setTimeout(function(){checkAd(e,n)},1e3)):(trackAd("Impression Track Fail Main",m,g),SetCookie(u,"unreachable",h,"/"),void 0!==e.fallBackImg&&""!==e.fallBackImg&&(a=/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi,o=new RegExp(a),e.fallBackImg.match(o)?(t=new Image,t.src=e.fallBackImg,t.onload=function(){l.innerHTML='<img src="'+t.src+'">',trackAd("Impression Track Success",m,g),trackAd("Impression Track Fallback Image",m,g)},t.onerror=function(){trackAd("Impression Track Fail Fallback",m,g)}):(trackAd("Impression Track Fail Fallback Invalid",m,g),ga("send","event","FallBack Image Error",m,e.fallBackImg,{nonInteraction:1})))))}function checkAdLoad(){var e,n,t,a,o,i,r,d;"5"===window.adUnitTrack?e=document.body:document.getElementById(window.adUnitIds[window.adUnitTrack])&&(e=document.getElementById(window.adUnitIds[window.adUnitTrack])),"object"==typeof e?(n=e.getElementsByTagName("a").length||0,t=e.getElementsByTagName("video").length||0,a=e.getElementsByTagName("iframe").length||0,o=e.getElementsByTagName("img").length||0,i=e.getElementsByTagName("div").length||0,r=e.getElementsByTagName("object").length||0,d=n+t+a+o+i+r,d>0?trackAd("Loaded Something",window.adPositionTrack+" "+window.adIdTrack):setTimeout(function(){checkAdLoad()},1e3)):trackAd("ID "+window.adUnitIds[window.adUnitTrack]+" not found",window.adPositionTrack+" "+window.adIdTrack);try{}catch(c){}}function adLoadStatus(e,n){ga("send","event","Ad Load",e,n,{nonInteraction:1})}function setDolphinSlot(e){var n,t=window.dolRand?"&slot="+window.dolRand:"",a=GetCookie(e);if(!a)return t;window.cArray=a.split(";");for(n in window.cArray)window.cArray.hasOwnProperty(n)&&(window.cArray[n]=window.cArray[n].replace("|","="),t+="&_"+window.cArray[n]);return t}function writeAd(e){var n,t,a,o,i,r,d,c=adchID;return/iPad/i.test(uaString)&&/mpu/.test(e)?(c="2021",e="mpu"===e?"ipadhomempu":"ipadstorympu"):/OS [0-9]+\_/i.test(uaString)&&(/iPhone/i.test(uaString)||/iPod/i.test(uaString))?c="2022":490>=w1&&(c="2023"),("2022"===c||"2023"===c)&&("banner"===e?e="phonebanner":"mpu"===e?e="phonempu":"storybanner"===e?e="phonestorybanner":"storympu"===e&&(e="phonestorympu")),n="banner"===e&&0===adCount[e]?"topbanner":"a",t=adCount[e],t<adMax[e]?(a=adPositions[e][t],o="/m/marketing/"+n+".html?v=2#adid="+c+a+"&pid="+e+adCount[e],/mpu/.test(e)?(i="300",r="250"):"phonebanner"===e||"phonestorybanner"===e?(i="100%",r="50"):(i="100%",r="90"),d='<iframe id="'+e+adCount[e]+'" width="'+i+'" height="'+r+'" frameborder="0" scrolling="no" marginwidth="0" marginheight="0" src="'+o+'"></iframe>'):(/banner/.test(e)&&(document.querySelectorAll(".banner-placeholder")[t].style.display="none"),d=""),adCount[e]=adCount[e]+1,d}var username=GetCookie("USER_NAME")||"",userId=GetCookie("USER_ID")||"",ccodeCookie=GetCookie("ccode")||"",user_name=GetCookie("USER_NAME");null!==user_name&&(document.documentElement.className+=" is-member");var slotStr=setDolphinSlot("USER_KV"),adCount={},adMax={},adPositions={banner:["0001","0006","0007","0008"],tagbanner:["0010"],mpu:["0003","0004","0005","0004"],tagmpu:["0012","0013"],storympu:["0005","0003","0004","0003"],ipadhomempu:["0003","0004"],ipadstorympu:["0005"],phonebanner:["0101","0114"],phonempu:["0003"],phonestorybanner:["0101","0115"],phonestorympu:["0004"]},uaString=navigator.userAgent||navigator.vendor||"",w1=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;for(var x in adPositions)adPositions.hasOwnProperty(x)&&(adCount[x]=0,adMax[x]=adPositions[x].length);